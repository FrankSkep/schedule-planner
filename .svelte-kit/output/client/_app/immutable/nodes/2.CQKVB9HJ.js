import{f as G,a as F,c as Ge,d as ar,t as nr}from"../chunks/DUHHJbdK.js";import{i as Te}from"../chunks/WauwbnaA.js";import{a1 as sr,o as ir,ap as xt,D as Me,x as B,a2 as or,z as lr,g as c,P as Se,A as cr,B as ur,C as nt,F as Pe,y as ge,af as fr,G as _t,q as St,I as dr,aq as Fe,aj as Et,L as Ct,a4 as Ee,ar as Ne,as as st,at as Be,V as O,au as it,i as kt,av as hr,aw as vr,ai as mr,ax as gr,w as br,ay as pr,ad as yr,J as ze,az as wr,aA as xr,aB as _r,aC as Sr,aD as Er,E as Cr,aE as kr,aF as Tr,b as ne,aG as Rr,aH as Ar,v as be,a7 as ot,a8 as lt,a9 as Ir,aI as Lr,K as Mr,p as Re,aJ as Ve,aK as Tt,k as Ae,aL as Pr,T as m,e as de,m as E,s as T,n as w,t as q,j as Je,aM as $e,aN as Rt,aO as Fr}from"../chunks/lD0y4cry.js";import{l as At,a as $r,b as Or,w as Hr,s as Y,e as D}from"../chunks/BP03wRky.js";import{p as W,i as re,b as Dr}from"../chunks/BKmYrnvO.js";import{c as It}from"../chunks/DCg_aJdg.js";function se(e,t){return t}function jr(e,t,r,a){for(var n=[],s=t.length,i=0;i<s;i++)vr(t[i].e,n,!0);var o=s>0&&n.length===0&&r!==null;if(o){var u=r.parentNode;mr(u),u.append(r),a.clear(),te(e,t[0].prev,t[s-1].next)}gr(n,()=>{for(var h=0;h<s;h++){var l=t[h];o||(a.delete(l.k),te(e,l.prev,l.next)),br(l.e,!o)}})}function ie(e,t,r,a,n,s=null){var i=e,o={flags:t,items:new Map,first:null},u=(t&xt)!==0;if(u){var h=e;i=B?Me(or(h)):h.appendChild(sr())}B&&lr();var l=null,b=!1,f=Se(()=>{var p=r();return kt(p)?p:p==null?[]:Et(p)});ir(()=>{var p=c(f),d=p.length;if(b&&d===0)return;b=d===0;let _=!1;if(B){var C=cr(i)===ur;C!==(d===0)&&(i=nt(),Me(i),Pe(!1),_=!0)}if(B){for(var x=null,y,S=0;S<d;S++){if(ge.nodeType===8&&ge.data===fr){i=ge,_=!0,Pe(!1);break}var v=p[S],g=a(v,S);y=Lt(ge,o,x,null,v,g,S,n,t,r),o.items.set(g,y),x=y}d>0&&Me(nt())}B||Vr(p,o,i,n,t,a,r),s!==null&&(d===0?l?_t(l):l=St(()=>s(i)):l!==null&&dr(l,()=>{l=null})),_&&Pe(!0),c(f)}),B&&(i=ge)}function Vr(e,t,r,a,n,s,i){var I,$,N,Q;var o=(n&hr)!==0,u=(n&(Ne|Be))!==0,h=e.length,l=t.items,b=t.first,f=b,p,d=null,_,C=[],x=[],y,S,v,g;if(o)for(g=0;g<h;g+=1)y=e[g],S=s(y,g),v=l.get(S),v!==void 0&&((I=v.a)==null||I.measure(),(_??(_=new Set)).add(v));for(g=0;g<h;g+=1){if(y=e[g],S=s(y,g),v=l.get(S),v===void 0){var L=f?f.e.nodes_start:r;d=Lt(L,t,d,d===null?t.first:d.next,y,S,g,a,n,i),l.set(S,d),C=[],x=[],f=d.next;continue}if(u&&Ur(v,y,g,n),(v.e.f&Fe)!==0&&(_t(v.e),o&&(($=v.a)==null||$.unfix(),(_??(_=new Set)).delete(v))),v!==f){if(p!==void 0&&p.has(v)){if(C.length<x.length){var j=x[0],M;d=j.prev;var H=C[0],K=C[C.length-1];for(M=0;M<C.length;M+=1)ct(C[M],j,r);for(M=0;M<x.length;M+=1)p.delete(x[M]);te(t,H.prev,K.next),te(t,d,H),te(t,K,j),f=j,d=K,g-=1,C=[],x=[]}else p.delete(v),ct(v,f,r),te(t,v.prev,v.next),te(t,v,d===null?t.first:d.next),te(t,d,v),d=v;continue}for(C=[],x=[];f!==null&&f.k!==S;)(f.e.f&Fe)===0&&(p??(p=new Set)).add(f),x.push(f),f=f.next;if(f===null)continue;v=f}C.push(v),d=v,f=v.next}if(f!==null||p!==void 0){for(var X=p===void 0?[]:Et(p);f!==null;)(f.e.f&Fe)===0&&X.push(f),f=f.next;var k=X.length;if(k>0){var A=(n&xt)!==0&&h===0?r:null;if(o){for(g=0;g<k;g+=1)(N=X[g].a)==null||N.measure();for(g=0;g<k;g+=1)(Q=X[g].a)==null||Q.fix()}jr(t,X,A,l)}}o&&Ct(()=>{var Z;if(_!==void 0)for(v of _)(Z=v.a)==null||Z.apply()}),Ee.first=t.first&&t.first.e,Ee.last=d&&d.e}function Ur(e,t,r,a){(a&Ne)!==0&&st(e.v,t),(a&Be)!==0?st(e.i,r):e.i=r}function Lt(e,t,r,a,n,s,i,o,u,h){var l=(u&Ne)!==0,b=(u&pr)===0,f=l?b?O(n,!1,!1):it(n):n,p=(u&Be)===0?i:it(i),d={i:p,v:f,k:s,a:null,e:null,prev:r,next:a};try{return d.e=St(()=>o(e,f,p,h),B),d.e.prev=r&&r.e,d.e.next=a&&a.e,r===null?t.first=d:(r.next=d,r.e.next=d.e),a!==null&&(a.prev=d,a.e.prev=d.e),d}finally{}}function ct(e,t,r){for(var a=e.next?e.next.e.nodes_start:r,n=t?t.e.nodes_start:r,s=e.e.nodes_start;s!==a;){var i=yr(s);n.before(s),s=i}}function te(e,t,r){t===null?e.first=r:(t.next=r,t.e.next=r&&r.e),r!==null&&(r.prev=t,r.e.prev=t&&t.e)}function Mt(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=Mt(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function qr(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=Mt(e))&&(a&&(a+=" "),a+=t);return a}function Gr(e){return typeof e=="object"?qr(e):e??""}function Nr(e,t,r){var a=e==null?"":""+e;return a===""?null:a}function Br(e,t){return e==null?null:String(e)}function zr(e,t,r,a,n,s){var i=e.__className;if(B||i!==r||i===void 0){var o=Nr(r);(!B||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):e.className=o),e.__className=r}return s}function Jr(e,t,r,a){var n=e.__style;if(B||n!==t){var s=Br(t);(!B||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=t}return a}function Pt(e,t,r){if(e.multiple){if(t==null)return;if(!kt(t))return wr();for(var a of e.options)a.selected=t.includes(pe(a));return}for(a of e.options){var n=pe(a);if(xr(n,t)){a.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Wr(e,t){ze(()=>{var r=new MutationObserver(()=>{var a=e.__value;Pt(e,a)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function Oe(e,t,r=t){var a=!0;At(e,"change",n=>{var s=n?"[selected]":":checked",i;if(e.multiple)i=[].map.call(e.querySelectorAll(s),pe);else{var o=e.querySelector(s)??e.querySelector("option:not([disabled])");i=o&&pe(o)}r(i)}),ze(()=>{var n=t();if(Pt(e,n,a),a&&n===void 0){var s=e.querySelector(":checked");s!==null&&(n=pe(s),r(n))}e.__value=n,a=!1}),Wr(e)}function pe(e){return"__value"in e?e.__value:e.value}const Kr=Symbol("is custom element"),Xr=Symbol("is html");function Ft(e){if(B){var t=!1,r=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var a=e.value;ut(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var n=e.checked;ut(e,"checked",null),e.checked=n}}};e.__on_r=r,_r(r),$r()}}function ut(e,t,r,a){var n=Yr(e);B&&(n[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||n[t]!==(n[t]=r)&&(t==="loading"&&(e[Sr]=r),e.removeAttribute(t))}function Yr(e){return e.__attributes??(e.__attributes={[Kr]:e.nodeName.includes("-"),[Xr]:e.namespaceURI===Er})}const Qr=()=>performance.now(),ee={tick:e=>requestAnimationFrame(e),now:()=>Qr(),tasks:new Set};function $t(){const e=ee.now();ee.tasks.forEach(t=>{t.c(e)||(ee.tasks.delete(t),t.f())}),ee.tasks.size!==0&&ee.tick($t)}function Zr(e){let t;return ee.tasks.size===0&&ee.tick($t),{promise:new Promise(r=>{ee.tasks.add(t={c:e,f:r})}),abort(){ee.tasks.delete(t)}}}function xe(e,t){Hr(()=>{e.dispatchEvent(new CustomEvent(t))})}function ea(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const t=e.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ft(e){const t={},r=e.split(";");for(const a of r){const[n,s]=a.split(":");if(!n||s===void 0)break;const i=ea(n.trim());t[i]=s.trim()}return t}const ta=e=>e;function he(e,t,r,a){var n=(e&Rr)!==0,s="both",i,o=t.inert,u=t.style.overflow,h,l;function b(){var C=Ir,x=Ee;ot(null),lt(null);try{return i??(i=r()(t,(a==null?void 0:a())??{},{direction:s}))}finally{ot(C),lt(x)}}var f={is_global:n,in(){t.inert=o,xe(t,"introstart"),h=Ue(t,b(),l,1,()=>{xe(t,"introend"),h==null||h.abort(),h=i=void 0,t.style.overflow=u})},out(C){t.inert=!0,xe(t,"outrostart"),l=Ue(t,b(),h,0,()=>{xe(t,"outroend"),C==null||C()})},stop:()=>{h==null||h.abort(),l==null||l.abort()}},p=Ee;if((p.transitions??(p.transitions=[])).push(f),Or){var d=n;if(!d){for(var _=p.parent;_&&(_.f&Cr)!==0;)for(;(_=_.parent)&&(_.f&kr)===0;);d=!_||(_.f&Tr)!==0}d&&ze(()=>{ne(()=>f.in())})}}function Ue(e,t,r,a,n){var s=a===1;if(Ar(t)){var i,o=!1;return Ct(()=>{if(!o){var C=t({direction:s?"in":"out"});i=Ue(e,C,r,a,n)}}),{abort:()=>{o=!0,i==null||i.abort()},deactivate:()=>i.deactivate(),reset:()=>i.reset(),t:()=>i.t()}}if(r==null||r.deactivate(),!(t!=null&&t.duration))return n(),{abort:be,deactivate:be,reset:be,t:()=>a};const{delay:u=0,css:h,tick:l,easing:b=ta}=t;var f=[];if(s&&r===void 0&&(l&&l(0,1),h)){var p=ft(h(0,1));f.push(p,p)}var d=()=>1-a,_=e.animate(f,{duration:u,fill:"forwards"});return _.onfinish=()=>{_.cancel();var C=(r==null?void 0:r.t())??1-a;r==null||r.abort();var x=a-C,y=t.duration*Math.abs(x),S=[];if(y>0){var v=!1;if(h)for(var g=Math.ceil(y/16.666666666666668),L=0;L<=g;L+=1){var j=C+x*b(L/g),M=ft(h(j,1-j));S.push(M),v||(v=M.overflow==="hidden")}v&&(e.style.overflow="hidden"),d=()=>{var H=_.currentTime;return C+x*b(H/y)},l&&Zr(()=>{if(_.playState!=="running")return!1;var H=d();return l(H,1-H),!0})}_=e.animate(S,{duration:y,fill:"forwards"}),_.onfinish=()=>{d=()=>a,l==null||l(a,1-a),n()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=be)},deactivate:()=>{n=be},reset:()=>{a===0&&(l==null||l(1,0))},t:()=>d()}}function Ot(e,t,r=t){var a=Lr();At(e,"input",n=>{var s=n?e.defaultValue:e.value;if(s=He(e)?De(s):s,r(s),a&&s!==(s=t())){var i=e.selectionStart,o=e.selectionEnd;e.value=s??"",o!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(o,e.value.length))}}),(B&&e.defaultValue!==e.value||ne(t)==null&&e.value)&&r(He(e)?De(e.value):e.value),Mr(()=>{var n=t();He(e)&&n===De(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function He(e){var t=e.type;return t==="number"||t==="range"}function De(e){return e===""?null:+e}function Ht(e){return function(...t){var r=t[0];return r.preventDefault(),e==null?void 0:e.apply(this,t)}}function U(e){const[t,r]=e.split(":").map(Number);return t*60+r}function ra(e,t,r=-1){return e.some((a,n)=>n===r?!1:a.day===t.day&&U(t.startTime)<U(a.endTime)&&U(t.endTime)>U(a.startTime))}let _e=JSON.parse(localStorage.getItem("colorMap")||"{}");function dt(e){if(_e[e])return _e[e];const r=`hsl(${Math.floor(Math.random()*360)}, 70%, 85%)`;return _e[e]=r,localStorage.setItem("colorMap",JSON.stringify(_e)),r}var aa=G('<th class="border-b px-2 py-2"> </th>'),na=G('<div class="relative rounded-xl border border-blue-200 p-2 text-left break-words whitespace-pre-line shadow-md"><div class="absolute top-1 right-1 flex gap-1"><button class="text-yellow-600 hover:text-yellow-800" title="Editar" aria-label="Editar" style="background: transparent; border: none; padding: 0;"><i class="fa fa-pen"></i></button> <button class="text-red-600 hover:text-red-800" title="Eliminar" aria-label="Eliminar" style="background: transparent; border: none; padding: 0;"><i class="fa fa-trash"></i></button></div> <span class="font-semibold"> </span></div>'),sa=G('<td class="border-b px-2 py-2 align-top"></td>'),ia=G('<tr><td class="border-b px-2 py-2 font-mono text-base text-gray-700"> </td><!></tr>'),oa=G('<div class="overflow-auto rounded-xl border border-gray-200 bg-white shadow-lg"><table class="w-full min-w-[900px] table-fixed border-collapse text-center text-sm"><thead class="sticky top-0 z-10 bg-gradient-to-r from-blue-100 to-blue-200 font-semibold text-gray-700 shadow"><tr><th class="w-32 border-b px-2 py-2">Hora</th><!></tr></thead><tbody></tbody></table></div>');function la(e,t){Re(t,!1);const r=O(),a=O(),n=O();let s=W(t,"subjects",8);const i=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"];function o(x){if(!x.length)return["07:00","23:00"];const y=x.flatMap(g=>[g.startTime,g.endTime]),S=y.reduce((g,L)=>U(g)<U(L)?g:L),v=y.reduce((g,L)=>U(g)>U(L)?g:L);return[S,v]}const u=It();function h(x){u("edit",x)}function l(x){u("delete",x)}Ve(()=>(c(r),c(a),de(s())),()=>{(x=>{var y=Pr(x,2);m(r,y[0]),m(a,y[1])})(o(s()))}),Ve(()=>(c(r),c(a)),()=>{m(n,(()=>{const x=U(c(r)),y=U(c(a)),S=[];for(let v=x;v<y;v+=60){const g=Math.floor(v/60).toString().padStart(2,"0");S.push(`${g}:00`)}return S})())}),Tt(),Te();var b=oa(),f=E(b),p=E(f),d=E(p),_=T(E(d));ie(_,1,()=>i,se,(x,y)=>{var S=aa(),v=E(S,!0);w(S),q(()=>Y(v,c(y))),F(x,S)}),w(d),w(p);var C=T(p);ie(C,5,()=>c(n),se,(x,y,S)=>{var v=ia();zr(v,1,Gr(S%2===0?"bg-gray-50":"bg-white"));var g=E(v),L=E(g);w(g);var j=T(g);ie(j,1,()=>i,se,(M,H)=>{var K=sa();ie(K,5,s,se,(X,k,A)=>{var I=Ge(),$=Je(I);{var N=Q=>{var Z=na(),ve=E(Z),me=E(ve),ye=T(me,2);w(ve);var oe=T(ve,2),Le=E(oe,!0);w(oe),w(Z),q(le=>{Jr(Z,`background-color: ${le??""}`),Y(Le,(c(k),ne(()=>c(k).name)))},[()=>(de(dt),c(k),ne(()=>dt(c(k).name)))],Se),D("click",me,()=>h(A)),D("click",ye,()=>l(A)),F(Q,Z)};re($,Q=>{c(k),c(H),de(U),c(y),ne(()=>c(k).day===c(H)&&U(c(k).startTime)<=U(c(y))&&U(c(k).endTime)>U(c(y)))&&Q(N)})}F(X,I)}),w(K),F(M,K)}),w(v),q(M=>Y(L,`${c(y)??""}–${M??""}:00`),[()=>(c(y),ne(()=>(parseInt(c(y))+1).toString().padStart(2,"0")))],Se),F(x,v)}),w(C),w(f),w(b),F(e,b),Ae()}const ca=e=>e;function ua(e){const t=e-1;return t*t*t+1}function We(e,{delay:t=0,duration:r=400,easing:a=ca}={}){const n=+getComputedStyle(e).opacity;return{delay:t,duration:r,easing:a,css:s=>`opacity: ${s*n}`}}function Ke(e,{delay:t=0,duration:r=400,easing:a=ua,start:n=0,opacity:s=0}={}){const i=getComputedStyle(e),o=+i.opacity,u=i.transform==="none"?"":i.transform,h=1-n,l=o*(1-s);return{delay:t,duration:r,easing:a,css:(b,f)=>`
			transform: ${u} scale(${1-h*f});
			opacity: ${o-l*f}
		`}}var fa=G('<div class="mb-2 flex items-center gap-2 font-semibold text-yellow-700"><span> </span></div>'),da=G('<p class="mb-2 font-semibold text-red-600"> </p>'),ha=G("<option> </option>"),va=G("<option> </option>"),ma=G("<option> </option>"),ga=G('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"><div class="relative max-w-md min-w-[340px] rounded-2xl border border-gray-200 bg-white p-8 shadow-2xl"><button class="absolute top-3 right-3 text-gray-400 transition-colors hover:text-red-500" aria-label="Cerrar"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <form class="space-y-4"><!> <!> <div class="grid grid-cols-1 gap-4 md:grid-cols-2"><label><span class="block font-semibold text-gray-700">Nombre de la materia</span> <input required class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow transition focus:border-blue-400 focus:outline-none"/></label> <label><span class="block font-semibold text-gray-700">Día</span> <select class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow transition focus:border-blue-400 focus:outline-none"></select></label> <label><span class="block font-semibold text-gray-700">Hora inicio</span> <select class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow transition focus:border-blue-400 focus:outline-none"></select></label> <label><span class="block font-semibold text-gray-700">Hora fin</span> <select class="mt-1 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow transition focus:border-blue-400 focus:outline-none"></select></label></div> <div class="flex justify-end gap-3 pt-3"><button type="submit" class="cursor-pointer rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-blue-700">Guardar</button> <button type="button" class="cursor-pointer rounded-lg bg-gray-200 px-4 py-2 text-sm font-semibold text-gray-700 shadow transition hover:bg-gray-300">Cancelar</button></div></form></div></div>');function ba(e,t){Re(t,!1);let r=W(t,"subject",28,()=>({name:"",day:"Lunes",startTime:"07:00",endTime:"08:00"})),a=W(t,"editIndex",8,null),n=W(t,"message",8,"");const s=It(),i=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],o=Array.from({length:16},(k,A)=>`${(A+7).toString().padStart(2,"0")}:00`);function u(){s("submit",{subject:r(),editIndex:a()})}Te();var h=ga(),l=E(h),b=E(l),f=T(b,2),p=E(f);{var d=k=>{var A=fa(),I=E(A),$=E(I);w(I),w(A),q(()=>Y($,`✏️ Editando: ${de(r()),ne(()=>r().name)??""}`)),F(k,A)};re(p,k=>{a()!==null&&k(d)})}var _=T(p,2);{var C=k=>{var A=da(),I=E(A,!0);w(A),q(()=>Y(I,n())),F(k,A)};re(_,k=>{n()&&k(C)})}var x=T(_,2),y=E(x),S=T(E(y),2);Ft(S),w(y);var v=T(y,2),g=T(E(v),2);q(()=>{r(),$e(()=>{})}),ie(g,5,()=>i,se,(k,A)=>{var I=ha(),$={},N=E(I,!0);w(I),q(()=>{$!==($=c(A))&&(I.value=(I.__value=c(A))??""),Y(N,c(A))}),F(k,I)}),w(g),w(v);var L=T(v,2),j=T(E(L),2);q(()=>{r(),$e(()=>{})}),ie(j,5,()=>o,se,(k,A)=>{var I=va(),$={},N=E(I,!0);w(I),q(()=>{$!==($=c(A))&&(I.value=(I.__value=c(A))??""),Y(N,c(A))}),F(k,I)}),w(j),w(L);var M=T(L,2),H=T(E(M),2);q(()=>{r(),$e(()=>{})}),ie(H,5,()=>o,se,(k,A)=>{var I=ma(),$={},N=E(I,!0);w(I),q(()=>{$!==($=c(A))&&(I.value=(I.__value=c(A))??""),Y(N,c(A))}),F(k,I)}),w(H),w(M),w(x);var K=T(x,2),X=T(E(K),2);w(K),w(f),w(l),w(h),D("click",b,()=>s("close")),Ot(S,()=>r().name,k=>r(r().name=k,!0)),Oe(g,()=>r().day,k=>r(r().day=k,!0)),Oe(j,()=>r().startTime,k=>r(r().startTime=k,!0)),Oe(H,()=>r().endTime,k=>r(r().endTime=k,!0)),D("click",X,function(...k){var A;(A=a()!==null?()=>s("cancelEdit"):()=>s("close"))==null||A.apply(this,k)}),D("submit",f,Ht(u)),he(3,l,()=>Ke,()=>({duration:250})),he(3,h,()=>We),F(e,h),Ae()}function pa(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),a=r.createElement("base"),n=r.createElement("a");return r.head.appendChild(a),r.body.appendChild(n),t&&(a.href=t),n.href=e,n.href}const ya=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function ae(e){const t=[];for(let r=0,a=e.length;r<a;r++)t.push(e[r]);return t}let ue=null;function Dt(e={}){return ue||(e.includeStyleProperties?(ue=e.includeStyleProperties,ue):(ue=ae(window.getComputedStyle(document.documentElement)),ue))}function Ce(e,t){const a=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return a?parseFloat(a.replace("px","")):0}function wa(e){const t=Ce(e,"border-left-width"),r=Ce(e,"border-right-width");return e.clientWidth+t+r}function xa(e){const t=Ce(e,"border-top-width"),r=Ce(e,"border-bottom-width");return e.clientHeight+t+r}function jt(e,t={}){const r=t.width||wa(e),a=t.height||xa(e);return{width:r,height:a}}function _a(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const J=16384;function Sa(e){(e.width>J||e.height>J)&&(e.width>J&&e.height>J?e.width>e.height?(e.height*=J/e.width,e.width=J):(e.width*=J/e.height,e.height=J):e.width>J?(e.height*=J/e.width,e.width=J):(e.width*=J/e.height,e.height=J))}function ke(e){return new Promise((t,r)=>{const a=new Image;a.onload=()=>{a.decode().then(()=>{requestAnimationFrame(()=>t(a))})},a.onerror=r,a.crossOrigin="anonymous",a.decoding="async",a.src=e})}async function Ea(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Ca(e,t,r){const a="http://www.w3.org/2000/svg",n=document.createElementNS(a,"svg"),s=document.createElementNS(a,"foreignObject");return n.setAttribute("width",`${t}`),n.setAttribute("height",`${r}`),n.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),n.appendChild(s),s.appendChild(e),Ea(n)}const z=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||z(r,t)};function ka(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Ta(e,t){return Dt(t).map(r=>{const a=e.getPropertyValue(r),n=e.getPropertyPriority(r);return`${r}: ${a}${n?" !important":""};`}).join(" ")}function Ra(e,t,r,a){const n=`.${e}:${t}`,s=r.cssText?ka(r):Ta(r,a);return document.createTextNode(`${n}{${s}}`)}function ht(e,t,r,a){const n=window.getComputedStyle(e,r),s=n.getPropertyValue("content");if(s===""||s==="none")return;const i=ya();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(Ra(i,r,n,a)),t.appendChild(o)}function Aa(e,t,r){ht(e,t,":before",r),ht(e,t,":after",r)}const vt="application/font-woff",mt="image/jpeg",Ia={woff:vt,woff2:vt,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:mt,jpeg:mt,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function La(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Xe(e){const t=La(e).toLowerCase();return Ia[t]||""}function Ma(e){return e.split(/,/)[1]}function qe(e){return e.search(/^(data:)/)!==-1}function Pa(e,t){return`data:${t};base64,${e}`}async function Vt(e,t,r){const a=await fetch(e,t);if(a.status===404)throw new Error(`Resource "${a.url}" not found`);const n=await a.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:a,result:o.result}))}catch(u){i(u)}},o.readAsDataURL(n)})}const je={};function Fa(e,t,r){let a=e.replace(/\?.*/,"");return r&&(a=e),/ttf|otf|eot|woff2?/i.test(a)&&(a=a.replace(/.*\//,"")),t?`[${t}]${a}`:a}async function Ye(e,t,r){const a=Fa(e,t,r.includeQueryParams);if(je[a]!=null)return je[a];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let n;try{const s=await Vt(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),Ma(o)));n=Pa(s,t)}catch(s){n=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return je[a]=n,n}async function $a(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):ke(t)}async function Oa(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return ke(o)}const r=e.poster,a=Xe(r),n=await Ye(r,a,t);return ke(n)}async function Ha(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await Ie(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Da(e,t){return z(e,HTMLCanvasElement)?$a(e):z(e,HTMLVideoElement)?Oa(e,t):z(e,HTMLIFrameElement)?Ha(e,t):e.cloneNode(Ut(e))}const ja=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Ut=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Va(e,t,r){var a,n;if(Ut(t))return t;let s=[];return ja(e)&&e.assignedNodes?s=ae(e.assignedNodes()):z(e,HTMLIFrameElement)&&(!((a=e.contentDocument)===null||a===void 0)&&a.body)?s=ae(e.contentDocument.body.childNodes):s=ae(((n=e.shadowRoot)!==null&&n!==void 0?n:e).childNodes),s.length===0||z(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>Ie(o,r)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function Ua(e,t,r){const a=t.style;if(!a)return;const n=window.getComputedStyle(e);n.cssText?(a.cssText=n.cssText,a.transformOrigin=n.transformOrigin):Dt(r).forEach(s=>{let i=n.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),z(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),a.setProperty(s,i,n.getPropertyPriority(s))})}function qa(e,t){z(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),z(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Ga(e,t){if(z(e,HTMLSelectElement)){const r=t,a=Array.from(r.children).find(n=>e.value===n.getAttribute("value"));a&&a.setAttribute("selected","")}}function Na(e,t,r){return z(t,Element)&&(Ua(e,t,r),Aa(e,t,r),qa(e,t),Ga(e,t)),t}async function Ba(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const a={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const u=e.querySelector(o),h=document.querySelector(o);!u&&h&&!a[o]&&(a[o]=await Ie(h,t,!0))}}const n=Object.values(a);if(n.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let u=0;u<n.length;u++)o.appendChild(n[u]);e.appendChild(i)}return e}async function Ie(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(a=>Da(a,t)).then(a=>Va(e,a,t)).then(a=>Na(e,a,t)).then(a=>Ba(a,t))}const qt=/url\((['"]?)([^'"]+?)\1\)/g,za=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Wa(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Ka(e){const t=[];return e.replace(qt,(r,a,n)=>(t.push(n),r)),t.filter(r=>!qe(r))}async function Xa(e,t,r,a,n){try{const s=r?pa(t,r):t,i=Xe(t);let o;return n||(o=await Ye(s,i,a)),e.replace(Wa(t),`$1${o}$3`)}catch{}return e}function Ya(e,{preferredFontFormat:t}){return t?e.replace(Ja,r=>{for(;;){const[a,,n]=za.exec(r)||[];if(!n)return"";if(n===t)return`src: ${a};`}}):e}function Gt(e){return e.search(qt)!==-1}async function Nt(e,t,r){if(!Gt(e))return e;const a=Ya(e,r);return Ka(a).reduce((s,i)=>s.then(o=>Xa(o,i,t,r)),Promise.resolve(a))}async function fe(e,t,r){var a;const n=(a=t.style)===null||a===void 0?void 0:a.getPropertyValue(e);if(n){const s=await Nt(n,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Qa(e,t){await fe("background",e,t)||await fe("background-image",e,t),await fe("mask",e,t)||await fe("-webkit-mask",e,t)||await fe("mask-image",e,t)||await fe("-webkit-mask-image",e,t)}async function Za(e,t){const r=z(e,HTMLImageElement);if(!(r&&!qe(e.src))&&!(z(e,SVGImageElement)&&!qe(e.href.baseVal)))return;const a=r?e.src:e.href.baseVal,n=await Ye(a,Xe(a),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(h){i(h)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=n):e.href.baseVal=n})}async function en(e,t){const a=ae(e.childNodes).map(n=>Bt(n,t));await Promise.all(a).then(()=>e)}async function Bt(e,t){z(e,Element)&&(await Qa(e,t),await Za(e,t),await en(e,t))}function tn(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const a=t.style;return a!=null&&Object.keys(a).forEach(n=>{r[n]=a[n]}),e}const gt={};async function bt(e){let t=gt[e];if(t!=null)return t;const a=await(await fetch(e)).text();return t={url:e,cssText:a},gt[e]=t,t}async function pt(e,t){let r=e.cssText;const a=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(a,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Vt(o,t.fetchRequestInit,({result:u})=>(r=r.replace(i,`url(${u})`),[i,u]))});return Promise.all(s).then(()=>r)}function yt(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let a=e.replace(r,"");const n=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=n.exec(a);if(u===null)break;t.push(u[0])}a=a.replace(n,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let u=s.exec(a);if(u===null){if(u=o.exec(a),u===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(u[0])}return t}async function rn(e,t){const r=[],a=[];return e.forEach(n=>{if("cssRules"in n)try{ae(n.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const u=s.href,h=bt(u).then(l=>pt(l,t)).then(l=>yt(l).forEach(b=>{try{n.insertRule(b,b.startsWith("@import")?o+=1:n.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:b,error:f})}})).catch(l=>{console.error("Error loading remote css",l.toString())});a.push(h)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];n.href!=null&&a.push(bt(n.href).then(o=>pt(o,t)).then(o=>yt(o).forEach(u=>{i.insertRule(u,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(a).then(()=>(e.forEach(n=>{if("cssRules"in n)try{ae(n.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${n.href}`,s)}}),r))}function an(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Gt(t.style.getPropertyValue("src")))}async function nn(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=ae(e.ownerDocument.styleSheets),a=await rn(r,t);return an(a)}function zt(e){return e.trim().replace(/["']/g,"")}function sn(e){const t=new Set;function r(a){(a.style.fontFamily||getComputedStyle(a).fontFamily).split(",").forEach(s=>{t.add(zt(s))}),Array.from(a.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function on(e,t){const r=await nn(e,t),a=sn(e);return(await Promise.all(r.filter(s=>a.has(zt(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Nt(s.cssText,i,t)}))).join(`
`)}async function ln(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await on(e,t);if(r){const a=document.createElement("style"),n=document.createTextNode(r);a.appendChild(n),e.firstChild?e.insertBefore(a,e.firstChild):e.appendChild(a)}}async function cn(e,t={}){const{width:r,height:a}=jt(e,t),n=await Ie(e,t,!0);return await ln(n,t),await Bt(n,t),tn(n,t),await Ca(n,r,a)}async function un(e,t={}){const{width:r,height:a}=jt(e,t),n=await cn(e,t),s=await ke(n),i=document.createElement("canvas"),o=i.getContext("2d"),u=t.pixelRatio||_a(),h=t.canvasWidth||r,l=t.canvasHeight||a;return i.width=h*u,i.height=l*u,t.skipAutoScale||Sa(i),i.style.width=`${h}`,i.style.height=`${l}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function fn(e,t={}){return(await un(e,t)).toDataURL()}var dn=G('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"><div class="relative max-w-md min-w-[340px] rounded-2xl border border-gray-200 bg-white p-8 shadow-2xl"><button class="absolute top-3 right-3 text-gray-400 transition-colors hover:text-red-500" aria-label="Cerrar"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <p class="mb-6 text-base text-gray-800"> </p> <div class="flex justify-end gap-3 pt-2"><button class="cursor-pointer rounded-lg bg-gray-200 px-4 py-2 text-sm font-semibold text-gray-700 shadow transition hover:bg-gray-300">Cancelar</button> <button class="cursor-pointer rounded-lg bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-red-700">Aceptar</button></div></div></div>');function hn(e,t){let r=W(t,"message",8,""),a=W(t,"show",8,!1),n=W(t,"onConfirm",8),s=W(t,"onCancel",8);var i=Ge(),o=Je(i);{var u=h=>{var l=dn(),b=E(l),f=E(b),p=T(f,2),d=E(p,!0);w(p);var _=T(p,2),C=E(_),x=T(C,2);w(_),w(b),w(l),q(()=>Y(d,r())),D("click",f,function(...y){var S;(S=s())==null||S.apply(this,y)}),D("click",C,function(...y){var S;(S=s())==null||S.apply(this,y)}),D("click",x,function(...y){var S;(S=n())==null||S.apply(this,y)}),he(3,b,()=>Ke,()=>({duration:250})),he(3,l,()=>We),F(h,l)};re(o,h=>{a()&&h(u)})}F(e,i)}var vn=G('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm"><form class="relative max-w-md min-w-[340px] rounded-2xl border border-gray-200 bg-white p-8 shadow-2xl"><button class="absolute top-3 right-3 text-gray-400 transition-colors hover:text-red-500" type="button" aria-label="Cerrar"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <label for="input-modal-field" class="mb-4 block font-semibold text-gray-800"> </label> <input id="input-modal-field" class="mb-6 w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow transition focus:border-blue-400 focus:outline-none" required/> <div class="flex justify-end gap-3 pt-2"><button type="button" class="cursor-pointer rounded-lg bg-gray-200 px-4 py-2 text-sm font-semibold text-gray-700 shadow transition hover:bg-gray-300">Cancelar</button> <button type="submit" class="cursor-pointer rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-blue-700">Aceptar</button></div></form></div>');function wt(e,t){Re(t,!1);let r=W(t,"show",8,!1),a=W(t,"label",8,""),n=W(t,"defaultValue",8,""),s=W(t,"onSubmit",8),i=W(t,"onCancel",8),o=O(n());Ve(()=>(de(r()),de(n())),()=>{r()&&m(o,n())}),Tt(),Te();var u=Ge(),h=Je(u);{var l=b=>{var f=vn(),p=E(f),d=E(p),_=T(d,2),C=E(_,!0);w(_);var x=T(_,2);Ft(x);var y=T(x,2),S=E(y);Rt(2),w(y),w(p),w(f),q(()=>Y(C,a())),D("click",d,function(...v){var g;(g=i())==null||g.apply(this,v)}),Ot(x,()=>c(o),v=>m(o,v)),D("click",S,function(...v){var g;(g=i())==null||g.apply(this,v)}),he(3,p,()=>Ke,()=>({duration:250})),D("submit",p,Ht(()=>s()(c(o).trim()))),he(3,f,()=>We),F(b,f)};re(h,b=>{r()&&b(l)})}F(e,u),Ae()}var mn=ar('<svg class="h-5 w-5 animate-spin text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path></svg> Exportando...',1),gn=G('<p class="mb-4 font-semibold text-red-600"> </p>'),bn=G('<main class="min-h-screen bg-gray-50 p-6 text-gray-800"><div class="relative mx-auto max-w-7xl"><div class="mb-6 flex items-center justify-between"><h1 class="mb-2 flex-1 bg-gradient-to-r from-indigo-600 via-blue-500 to-teal-400 bg-clip-text text-center text-4xl font-extrabold tracking-tight text-transparent drop-shadow-lg">Planificador de Horario Académico</h1> <a href="https://github.com/FrankSkep/schedule-planner" target="_blank" rel="noopener noreferrer" class="ml-4 inline-flex items-center gap-2 rounded bg-gray-800 px-4 py-2 text-white transition hover:bg-gray-700" aria-label="Ver en GitHub"><i class="fab fa-github fa-lg"></i> GitHub</a></div> <div class="mb-6 flex flex-col justify-between gap-3 md:flex-row"><div class="flex gap-3"><button class="cursor-pointer rounded-lg bg-blue-600 px-4 py-2 text-base font-semibold text-white shadow transition hover:bg-blue-700">+ Agregar materia</button> <button type="button" class="cursor-pointer rounded-lg bg-red-600 px-4 py-2 text-base font-semibold text-white shadow transition hover:bg-red-700">Limpiar horario</button></div> <div class="flex flex-col gap-3 md:ml-auto md:flex-row"><button class="cursor-pointer rounded-lg bg-green-600 px-4 py-2 text-base font-semibold text-white shadow transition hover:bg-green-700">Exportar JSON</button> <label class="cursor-pointer rounded-lg bg-gray-200 px-4 py-2 text-base font-semibold text-gray-700 shadow transition hover:bg-gray-300">Importar JSON <input type="file" accept="application/json" class="hidden"/></label> <button class="cursor-pointer rounded-lg bg-indigo-600 px-4 py-2 text-base font-semibold text-white shadow transition hover:bg-indigo-700"><!></button></div></div> <!> <div><!></div> <!></div> <!> <!> <!></main>');function En(e,t){Re(t,!1);let r=O(),a=O(!1),n="horario.png",s=O(!1),i=O(!1),o=O(!1),u=null,h=O(""),l=O(""),b=O([]),f=O({name:"",day:"Lunes",startTime:"07:00",endTime:"08:00"}),p=O(null),d=O(""),_=O(!1),C=O(null);m(b,JSON.parse(localStorage.getItem("subjects")||"[]"));function x(){localStorage.setItem("subjects",JSON.stringify(c(b)))}function y(R){const{subject:P,editIndex:V}=R.detail;if(parseInt(P.startTime)>=parseInt(P.endTime)){m(l,"La hora de inicio debe ser menor que la de fin.");return}if(ra(c(b),P,V===null?void 0:V)){m(l,"Conflicto de horario con otra materia.");return}V!==null?(Fr(b,c(b)[V]=P),m(b,[...c(b)])):m(b,[...c(b),P]),x(),m(l,""),m(f,{name:"",day:"Lunes",startTime:"07:00",endTime:"08:00"}),m(p,null),m(_,!1)}function S(R){m(C,R),m(s,!0)}function v(R){m(f,{...c(b)[R]}),m(p,R),m(l,""),m(_,!0)}function g(){m(f,{name:"",day:"Lunes",startTime:"07:00",endTime:"08:00"}),m(p,null),m(l,""),m(_,!0)}function L(){m(f,{name:"",day:"Lunes",startTime:"07:00",endTime:"08:00"}),m(p,null),m(l,""),m(_,!1)}function j(){m(s,!0)}function M(){if(c(C)!==null){c(b).splice(c(C),1),m(b,[...c(b)]),x(),m(C,null),m(s,!1);return}m(b,[]),localStorage.removeItem("subjects"),m(s,!1)}function H(){m(h,"horario"),u="json",m(i,!0)}function K(R){var tt;const P=R.target;if(!((tt=P.files)!=null&&tt.length))return;const V=P.files[0],ce=new FileReader;ce.onload=rr=>{var rt;try{const at=JSON.parse((rt=rr.target)==null?void 0:rt.result);Array.isArray(at)?(m(b,at),x(),m(d,"")):m(d,"Archivo inválido.")}catch{m(d,"Archivo inválido.")}},ce.readAsText(V)}function X(){m(h,n.replace(/\.png$/i,"")),u="png",m(o,!0)}function k(R){if(!R){m(i,!1),m(o,!1);return}if(u==="json"){const P=new Blob([JSON.stringify(c(b),null,2)],{type:"application/json"}),V=URL.createObjectURL(P),ce=document.createElement("a");ce.href=V,ce.download=`${R}.json`,ce.click(),URL.revokeObjectURL(V),m(i,!1)}if(u==="png"){if(m(a,!0),m(d,""),m(o,!1),!c(r)){m(a,!1),m(o,!1);return}fn(c(r)).then(P=>{const V=document.createElement("a");V.href=P,V.download=`${R}.png`,V.click()}).catch(()=>{m(d,"No se pudo exportar como PNG.")}).finally(()=>{m(a,!1)})}u=null}function A(){m(i,!1),m(o,!1),u=null}Te();var I=bn(),$=E(I),N=T(E($),2),Q=E(N),Z=E(Q),ve=T(Z,2);w(Q);var me=T(Q,2),ye=E(me),oe=T(ye,2),Le=T(E(oe));w(oe);var le=T(oe,2),Jt=E(le);{var Wt=R=>{var P=mn();Rt(),F(R,P)},Kt=R=>{var P=nr("Exportar PNG");F(R,P)};re(Jt,R=>{c(a)?R(Wt):R(Kt,!1)})}w(le),w(me),w(N);var Qe=T(N,2);{var Xt=R=>{var P=gn(),V=E(P,!0);w(P),q(()=>Y(V,c(d))),F(R,P)};re(Qe,R=>{c(d)&&R(Xt)})}var we=T(Qe,2),Yt=E(we);la(Yt,{get subjects(){return c(b)},$$events:{edit:R=>v(R.detail),delete:R=>S(R.detail)}}),w(we),Dr(we,R=>m(r,R),()=>c(r));var Qt=T(we,2);{var Zt=R=>{ba(R,{get subject(){return c(f)},get editIndex(){return c(p)},get message(){return c(l)},$$events:{submit:y,cancelEdit:L,close:L}})};re(Qt,R=>{c(_)&&R(Zt)})}w($);var Ze=T($,2);const er=Se(()=>c(C)!==null?"¿Seguro que deseas eliminar esta materia?":"¿Estás seguro de que deseas borrar todo el horario?");hn(Ze,{get show(){return c(s)},get message(){return c(er)},onConfirm:M,onCancel:()=>{m(s,!1),m(C,null)}});var et=T(Ze,2);wt(et,{get show(){return c(i)},label:"Escribe el nombre del archivo JSON:",get defaultValue(){return c(h)},onSubmit:k,onCancel:A});var tr=T(et,2);wt(tr,{get show(){return c(o)},label:"Escribe el nombre del archivo PNG:",get defaultValue(){return c(h)},onSubmit:k,onCancel:A}),w(I),q(()=>le.disabled=c(a)),D("click",Z,g),D("click",ve,j),D("click",ye,H),D("change",Le,K),D("click",le,X),F(e,I),Ae()}export{En as component};
